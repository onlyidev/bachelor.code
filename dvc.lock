schema: '2.0'
stages:
  train:
    cmd: python main.py 10 32 1 data/train/ben.npy data/train/mal.npy
    deps:
    - path: data/train/ben.npy
      hash: md5
      md5: 07dca973a84263d062907e19dc8031b7
      size: 1434489392
    - path: data/train/mal.npy
      hash: md5
      md5: 3b53f4382adf6b9b3122c284df107703
      size: 1434489392
    params:
      params.yaml:
        train.Z: 10
        train.batch_size: 32
        train.benign: data/train/ben.npy
        train.malware: data/train/mal.npy
        train.num_epochs: 1
    outs:
    - path: dynamic.yaml
      hash: md5
      md5: 25cad90a2614a1e8ba9f069332625cad
      size: 47
  MCA:
    cmd: python mca.py
    deps:
    - path: data/train/ben.npy
      hash: md5
      md5: 07dca973a84263d062907e19dc8031b7
      size: 1434489392
    - path: data/train/mal.npy
      hash: md5
      md5: 3b53f4382adf6b9b3122c284df107703
      size: 1434489392
    - path: dynamic.yaml
      hash: md5
      md5: 25cad90a2614a1e8ba9f069332625cad
      size: 47
    params:
      params.yaml:
        train.mca: data/MCA.csv
      dynamic.yaml:
        malgan.id: 984c6217d8cb4da6bd79ff089cca7355
    outs:
    - path: data/MCA.csv
      hash: md5
      md5: 7f675faffb4ed0bd8d61e61792fb8d29
      size: 76627
  split:
    cmd: python scripts/split.py
    deps:
    - path: data/raw/sleipnir/benign
      hash: md5
      md5: a94ca5d3a46622b553d9d35ef8f18f0a.dir
      size: 4037404256
      nfiles: 19696
    - path: data/raw/sleipnir/malicious
      hash: md5
      md5: c7057fcf38ebd7dc19f47bd8aef0a360.dir
      size: 7173280084
      nfiles: 34994
    params:
      params.yaml:
        split.benign_dir: data/raw/sleipnir/benign
        split.malware_dir: data/raw/sleipnir/malicious
        split.random_state: 42
        split.test_size: 0.2
    outs:
    - path: data/train/ben.npy
      hash: md5
      md5: e78244d64fd8f808dcb4b77dec4baa0b
      size: 72835328
    - path: data/train/mal.npy
      hash: md5
      md5: 41e98e974987926de8ff1acda690cca9
      size: 72835328
    - path: data/valid/ben.npy
      hash: md5
      md5: 584bd545c3e6a5098737aded01f778fb
      size: 18208928
    - path: data/valid/mal.npy
      hash: md5
      md5: 55871e5d2a24de8bc847ef2b085f99a1
      size: 18208928
  train_malgan:
    cmd: python main.py 100 32 32 data/train/ben.npy data/train/mal.npy
    deps:
    - path: data/train/ben.npy
      hash: md5
      md5: e78244d64fd8f808dcb4b77dec4baa0b
      size: 72835328
    - path: data/train/mal.npy
      hash: md5
      md5: 41e98e974987926de8ff1acda690cca9
      size: 72835328
    params:
      params.yaml:
        train.Z: 100
        train.batch_size: 32
        train.benign: data/train/ben.npy
        train.malware: data/train/mal.npy
        train.name: Bachelor_2000
        train.num_epochs: 32
    outs:
    - path: dynamic.yaml
      hash: md5
      md5: 37bf8ebaaa7ed168c79549e729a3f767
      size: 51
  train_mca:
    cmd: python mca.py
    deps:
    - path: data/train/ben.npy
      hash: md5
      md5: e78244d64fd8f808dcb4b77dec4baa0b
      size: 72835328
    - path: data/train/mal.npy
      hash: md5
      md5: 41e98e974987926de8ff1acda690cca9
      size: 72835328
    params:
      params.yaml:
        train.estimators: 200
        train.head: 1000
        train.mca: data/MCA.csv
      dynamic.yaml:
        experiment.id: 8415fe32e45b41058f5bd36efeacae12
    outs:
    - path: data/MCA.csv
      hash: md5
      md5: 18494f6ae062248821b7f954be76e4d1
      size: 348862
  train_mca_classifier:
    cmd: python mca_classifier.py
    deps:
    - path: data/MCA.csv
      hash: md5
      md5: 18494f6ae062248821b7f954be76e4d1
      size: 348862
    params:
      params.yaml:
        train.estimators: 200
        train.mca: data/MCA.csv
      dynamic.yaml:
        experiment.id: 8415fe32e45b41058f5bd36efeacae12
  graph_mca:
    cmd: python scripts/graph_mca.py
    deps:
    - path: data/MCA.csv
      hash: md5
      md5: 18494f6ae062248821b7f954be76e4d1
      size: 348862
    outs:
    - path: outs/mca_scatter.html
      hash: md5
      md5: 110f60d8add5a8b8cee6d83fc5640499
      size: 444803
  extract_normal_features:
    cmd: python lime_normal.py
    deps:
    - path: data/MCA.csv
      hash: md5
      md5: 18494f6ae062248821b7f954be76e4d1
      size: 348862
    - path: data/train/ben.npy
      hash: md5
      md5: e78244d64fd8f808dcb4b77dec4baa0b
      size: 72835328
    params:
      params.yaml:
        train.benign: data/train/ben.npy
        train.mca: data/MCA.csv
        train.normal_features: data/normal_features.txt
      dynamic.yaml:
        experiment.id: 8415fe32e45b41058f5bd36efeacae12
    outs:
    - path: data/normal_features.txt
      hash: md5
      md5: 79be6414ae25935f2f3761d1f6163da6
      size: 490
  experiment_base:
    cmd: python experiment.py normal
    deps:
    - path: data/valid/ben.npy
      hash: md5
      md5: 584bd545c3e6a5098737aded01f778fb
      size: 18208928
    - path: data/valid/mal.npy
      hash: md5
      md5: 55871e5d2a24de8bc847ef2b085f99a1
      size: 18208928
    params:
      params.yaml:
        metrics.normal: metrics/normal.json
        valid.benign: data/valid/ben.npy
        valid.malware: data/valid/mal.npy
      dynamic.yaml:
        experiment.id: 8415fe32e45b41058f5bd36efeacae12
    outs:
    - path: metrics/normal.json
      hash: md5
      md5: 6cba16c61107ff0914b1123b0ed7c891
      size: 853
    - path: metrics/normal.png
      hash: md5
      md5: 2a733e2e17de16647f8d85812b2f6794
      size: 19132
  experiment_lime:
    cmd: python experiment.py lime
    deps:
    - path: data/MCA.csv
      hash: md5
      md5: 18494f6ae062248821b7f954be76e4d1
      size: 348862
    - path: data/valid/ben.npy
      hash: md5
      md5: 584bd545c3e6a5098737aded01f778fb
      size: 18208928
    - path: data/valid/mal.npy
      hash: md5
      md5: 55871e5d2a24de8bc847ef2b085f99a1
      size: 18208928
    params:
      params.yaml:
        train.mca: data/MCA.csv
        train.normal_features: data/normal_features.txt
        valid.benign: data/valid/ben.npy
        valid.malware: data/valid/mal.npy
      dynamic.yaml:
        experiment.id: 8415fe32e45b41058f5bd36efeacae12
    outs:
    - path: metrics/lime.json
      hash: md5
      md5: 31ec42c7ccc1c431ca4910cfc4ec4eec
      size: 857
    - path: metrics/lime.png
      hash: md5
      md5: 5264e2fd08eebaf138a0e612d37e8b3e
      size: 20281
